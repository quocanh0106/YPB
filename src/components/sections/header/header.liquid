<div class="page-width flex bg-background justify-between items-center py-3 lg:py-0 h-46px lg:h-auto lg:min-h-[46px]">
  {% if section.blocks.size > 0 %}
    {% render 'megamenu' %}
    <modal-opener class="inline-block lg:hidden cursor-pointer menu-drawer-out-search hover:text-primary text-primary" data-id="#menu-drawer">
      {% render 'icon-hamburger' %}
    </modal-opener>
  {% endif %}
  <div class="flex items-center gap-x-10">
    <a href="{{ routes.root_url }}" class="hidden lg:inline-block no-underline relative before:absolute before:top-0 before:left-0 before:w-full before:h-12 before:-translate-y-2.5" title="{{ shop.name }}" style="max-width: {{ settings.logo_width }}px;">
      {%- if settings.logo != blank -%}
        {%- assign logo_alt = settings.logo.alt | default: shop.name | escape -%}
        {%- assign logo_height = settings.logo_width | divided_by: settings.logo.aspect_ratio -%}
        <img srcset="{%- if settings.logo.width >= 100 -%}{{ settings.logo | img_url: '100x' }} 100w,{%- endif -%}
        {%- if settings.logo.width >= 120 -%}{{ settings.logo | img_url: '120x' }} 120w,{%- endif -%}
        {%- if settings.logo.width >= 140 -%}{{ settings.logo | img_url: '140x' }} 140w,{%- endif -%}
        {%- if settings.logo.width >= 160 -%}{{ settings.logo | img_url: '160x' }} 160w,{%- endif -%}
        {%- if settings.logo.width >= 180 -%}{{ settings.logo | img_url: '180x' }} 180w,{%- endif -%}
        {%- if settings.logo.width >= 200 -%}{{ settings.logo | img_url: '200x' }} 200w,{%- endif -%}
        {{ settings.logo | img_url: 'master' }} {{ settings.logo_width }}w" 
        src="{{ settings.logo | image_url: width: settings.logo_width }}" 
        loading="lazy" 
        sizes="{{ settings.logo_width }}px" 
        width="{{ settings.logo_width }}" 
        height="{{ logo_height }}" 
        alt="{{ logo_alt }}">
      {%- else -%}
        <span class="h2">{{ shop.name }}</span>
      {%- endif -%}
    </a>
    <a href="{{ routes.root_url }}" class="inline-block lg:hidden no-underline relative before:absolute before:top-0 before:left-0 before:w-full before:h-12 before:-translate-y-2.5" title="{{ shop.name }}" style="max-width: {{ settings.logo_width_mb }}px;">
      {%- if settings.logo_mb != blank -%}
        {%- assign logo_mb_alt = settings.logo_mb.alt | default: shop.name | escape -%}
        {%- assign logo_mb_height = settings.logo_mb_width | divided_by: settings.logo_mb.aspect_ratio -%}
        <img srcset="{%- if settings.logo_mb.width >= 100 -%}{{ settings.logo_mb | img_url: '100x' }} 100w,{%- endif -%}
        {%- if settings.logo_mb.width >= 120 -%}{{ settings.logo_mb | img_url: '120x' }} 120w,{%- endif -%}
        {%- if settings.logo_mb.width >= 140 -%}{{ settings.logo_mb | img_url: '140x' }} 140w,{%- endif -%}
        {%- if settings.logo_mb.width >= 160 -%}{{ settings.logo_mb | img_url: '160x' }} 160w,{%- endif -%}
        {%- if settings.logo_mb.width >= 180 -%}{{ settings.logo_mb | img_url: '180x' }} 180w,{%- endif -%}
        {%- if settings.logo_mb.width >= 200 -%}{{ settings.logo_mb | img_url: '200x' }} 200w,{%- endif -%}
        {{ settings.logo_mb | img_url: 'master' }} {{ settings.logo_mb_width }}w" 
        src="{{ settings.logo_mb | image_url: width: settings.logo_width_mb }}" 
        loading="lazy" 
        sizes="{{ settings.logo_width_mb }}px" 
        width="{{ settings.logo_width_mb }}" 
        height="{{ logo_mb_height }}" 
        alt="{{ logo_mb_alt }}">
      {%- else -%}
        <span class="h3">{{ shop.name }}</span>
      {%- endif -%}
    </a>
  </div>
  <div class="flex items-center gap-x-4 m-0 p-0 justify-end">
    <predictive-search class="flex justify-end lg:justify-start w-full">
      <form action="{{ routes.search_url }}" method="get" role="search" class="absolute opacity-0 invisible bg-background shadow-search lg:shadow-none flex items-center gap-3 top-full left-0 h-16 px-4 pt-2 pb-3 md:px-7.5 lg:p-0 z-10 transition-all lg:!opacity-100 lg:!visible lg:static lg:max-w-[360px] lg:h-10 w-full lg:overflow-hidden">
        <div class="relative w-full center h-full lg:h-auto">
          <input class="placeholder:!text-primary !border-none w-full h-full lg:h-auto pl-14 pr-8 !rounded-circle lg:overflow-hidden appearance-none !outline-none !shadow-none !ring-transparent"
            id="Search-In-Modal-1"
            type="search"
            name="q"
            value=""
            pattern="^(?=.*\S).+$"
            role="combobox"
            aria-expanded="false"
            aria-owns="predictive-search-results"
            aria-controls="predictive-search-results"
            aria-haspopup="listbox"
            aria-autocomplete="list"
            autocorrect="off"
            autocomplete="off"
            autocapitalize="off"
            spellcheck="false"
            placeholder="{{ 'general.search.search' | t }}"
          >
          <input type="hidden" name="options[prefix]" value="last">
          <button type="reset" name="reset" class="absolute right-4 top-1/2 -translate-y-1/2 opacity-0 invisible" aria-label="reset">{% render 'icon-close' %}</button>
          <button type="submit" name="search" class="absolute top-1/2 -translate-y-1/2 left-4 w-6 h-6" aria-label="search">{% render 'icon-search' %}</button>
        </div>
        <span class="predictive-search-status hidden" role="status" aria-hidden="true"></span>
      </form>
      <div class="predictive-search predictive-search--header opacity-0 invisible transition-all absolute z-20 top-[calc(100%_+_64px)] lg:!top-search left-0 w-full bg-background shadow-megamenu overflow-y-auto max-h-searchmb lg:max-h-searchdt pb-safe-offset-96 lg:pb-0" tabindex="-1" data-predictive-search>
        <div class="predictive-search__preview">

        </div>
      </div>
      <span class="block lg:hidden w-6 h-6 cursor-pointer" id="open-search">{% render 'icon-search' %}</span>
    </predictive-search>
    
    <a href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}" title="account" class="flex items-center justify-center relative w-6 h-6 hover:text-primary text-primary{% if customer %} bg-primary rounded-full hover:bg-primary-250{% endif %}">
      {%- if customer -%}
        <span class="uppercase text-xs font-normal font-body leading-loose text-center p-2">{{ customer.first_name | split: '' | first }}{{ customer.last_name | split: '' | first }}</span>
      {%- else -%}
        {% render 'icon-customer' %}
      {%- endif -%}
    </a>
    <a href="/pages/wishlist" title="wishlist" class="flex items-center justify-center relative w-6 h-6 hover:text-primary text-primary">
      {% render 'icon-wishlist-header', class: "w-6 h-6", stroke: '0.25' %}
      <wishlist-count class="absolute bg-secondary text-background min-w-[1rem] h-4 rounded-full flex justify-center items-center bottom-3 left-4 hidden">
        <span aria-hidden="true" class="flex justify-center items-center h-full text-xxs leading-none"></span>
      </wishlist-count>
    </a>
    {% if settings.enable_cart_drawer and template != 'cart' %}
      {% capture cartDrawer %}{{ 'open-cart-drawer.js' | asset_url }}{% endcapture %}
      {% render 'atom_script', src: cartDrawer, priority: 'normal', type: "defer" %}


      <modal-opener class="cursor-pointer flex items-center justify-center relative w-6 h-6 hover:text-primary text-primary" title="cart" data-id="#cart-drawer">
        {%- render 'icon-cart' -%}
        <div class="absolute bg-secondary text-background min-w-[1rem] h-4 rounded-full flex justify-center items-center bottom-3 left-4 empty:hidden" id="cart-icon-bubble">
          {%- if cart != empty -%}
            {%- if cart.item_count < 100 -%}
              <span aria-hidden="true" class="flex justify-center items-center h-full text-xxs leading-none">{{ cart.item_count }}</span>
            {% else %}
              <span aria-hidden="true" class="flex justify-center items-center h-full text-xxs">+99</span>
            {%- endif -%}
          {%- endif -%}
        </div>
      </modal-opener>
      

    {% else %}
      <a href="{{ routes.cart_url }}" class="flex items-center justify-center relative w-6 h-6 hover:text-primary text-primary" title="cart">
        {%- render 'icon-cart' -%}
        <div class="absolute bg-secondary text-primary min-w-[1rem] h-4 rounded-full flex justify-center items-center bottom-3 left-4 empty:hidden" id="cart-icon-bubble">
          {%- if cart != empty -%}
            {%- if cart.item_count < 100 -%}
              <span aria-hidden="true" class="text-primary flex justify-center items-center h-full text-xxs leading-none">{{ cart.item_count }}</span>
            {% else %}
              <span aria-hidden="true" class="text-primary flex justify-center items-center h-full text-xxs">+99</span>
            {%- endif -%}
          {%- endif -%}
        </div>
      </a>
    {% endif %}
  </div>
</div>



{% capture src_url %}{{ 'header.js' | asset_url }}{% endcapture %}
{% render 'atom_script', src: src_url, priority: 'normal', type: "defer" %}

{% schema %}
  {
    "name": "Header",
    "tag": "header",
    "settings": [
      {
        "type": "checkbox",
        "id": "enable_sticky_header",
        "default": true,
        "label": "Enable sticky header"
      }
    ],
    "blocks": [
      {
        "type": "mega-menu",
        "name": "Mega menu",
        "settings": [
          {
            "type": "select",
            "id": "menu_alignment",
            "label": "Menu alignment",
            "default": "left",
            "options": [
              {
                "label": "Left",
                "value": "left"
              },
              {
                "label": "Right",
                "value": "right"
              }
            ]
          },
          {
            "type": "text",
            "id": "title",
            "label": "Mega navigation trigger"
          },
          {
            "type": "url",
            "id": "url",
            "label": "Link"
          },
          {
            "type": "link_list",
            "id": "menu",
            "label": "Megamenu"
          }
        ]
      }
    ]
  }
{% endschema %}